<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  id="Defs_Call_Demo" targetNamespace="http://bpmn.io/schema/bpmn">

  <!-- ========= PROCESSUS PARENT ========= -->
  <bpmn:process id="Process_Main" name="Main process" isExecutable="true">
    <bpmn:startEvent id="Start_Main" name="Start (main)">
      <bpmn:outgoing>Flow_main_to_call</bpmn:outgoing>
    </bpmn:startEvent>

    <bpmn:callActivity id="Call_Say" name="Call say_something" calledElement="say_something">
      <bpmn:incoming>Flow_main_to_call</bpmn:incoming>
      <bpmn:outgoing>Flow_call_to_end</bpmn:outgoing>
    </bpmn:callActivity>

    <bpmn:endEvent id="End_Main" name="End (main)">
      <bpmn:incoming>Flow_call_to_end</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="Flow_main_to_call" sourceRef="Start_Main" targetRef="Call_Say"/>
    <bpmn:sequenceFlow id="Flow_call_to_end" sourceRef="Call_Say" targetRef="End_Main"/>
  </bpmn:process>

  <!-- ========= SOUS-PROCESSUS APPELÉ ========= -->
  <bpmn:process id="say_something" name="Subprocess: say_something" isExecutable="true">
    <bpmn:startEvent id="Start_Sub" name="Start (sub)">
      <bpmn:outgoing>Flow_sub_to_task</bpmn:outgoing>
    </bpmn:startEvent>

    <!-- On met une tâche “neutre” pour visualiser l’exécution sans dépendre de scripts/services -->
    <bpmn:task id="Task_Sub" name="(Sub) Do something lightweight">
      <bpmn:incoming>Flow_sub_to_task</bpmn:incoming>
      <bpmn:outgoing>Flow_task_to_end</bpmn:outgoing>
    </bpmn:task>

    <bpmn:endEvent id="End_Sub" name="End (sub)">
      <bpmn:incoming>Flow_task_to_end</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="Flow_sub_to_task" sourceRef="Start_Sub" targetRef="Task_Sub"/>
    <bpmn:sequenceFlow id="Flow_task_to_end" sourceRef="Task_Sub" targetRef="End_Sub"/>
  </bpmn:process>

  <!-- (DI minimal omis volontairement; non requis pour l’exécution) -->
</bpmn:definitions>
